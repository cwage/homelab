---
# Gaming server configuration
# VPS hosts running game servers via LinuxGSM

# System users (sudo access)
# Profile users (game servers) are created by the gaming_server role
managed_users:
  - name: deploy
    shell: /bin/bash
    groups: ["sudo"]
    sudo_nopasswd: true
    ssh_pubkey_file: "keys/deploy.pub"
  - name: cwage
    shell: /bin/bash
    groups: ["sudo"]
    sudo_nopasswd: false
    password_hash: "$6$7fU9thowiE/0QSde$jpnJcpG0DVZpQ5OzOOgeuPg5OTBsiKsL0ats0geIZRoR5m0RLlnmGBrjnJtNk7Rfn4gm6wp8BBlHJCWZ6xFIT1"
    ssh_pubkey_files:
      - "inventories/keys/cwage-portaplotz.pub"
      - "inventories/keys/cwage-portaptty.pub"
      - "inventories/keys/cwage-shot.pub"

# Game server profiles
# Each profile creates a dedicated Linux user (no sudo) with isolated LGSM installation
# See templates/vintagestory/serverconfig.json.j2 for all available settings
#
# Passwords: Fetched from OpenBao at kv/services/gaming/<profile-name> (required).
# Ensure BAO_TOKEN is set and create the secret:
#   bao kv put kv/services/gaming/vs-buttopia password="secret"
gaming_profiles:
  - name: vs-buttopia
    game: vintagestory
    active: true
    version: "1.21.6"
    ports:
      game: 42420
    server_name: "Buttopia"
    world_config:
      landcover: 0.7
      oceanscale: 3
      landformScale: 3
      upheavelCommonness: 0.3
      geologicActivity: 0.05
      polarEquatorDistance: 100000
      playerMoveSpeed: 1.5
      creatureSwimSpeed: 2
      daysPerMonth: 9
      harshWinters: true
  - name: vs-sloths
    game: vintagestory
    active: false
    version: "1.21.6"
    ports:
      game: 42421
    server_name: "Slothtopia"
  - name: vs-cwage
    game: vintagestory
    active: false
    version: "1.21.6"
    ports:
      game: 42420
    server_name: "Cwage"
    world_save_name: "fuckass"
  # Valheim server profile
  # Ports: game (default 2456), query uses game+1 automatically
  # Password fetched from OpenBao at kv/services/gaming/vh-buttopia
  - name: vh-buttopia
    game: valheim
    active: false
    ports:
      game: 2456
    server_name: "Buttopia"
    world_name: "buttopia"
    public: 0
    # crossplay: true  # Enable for Xbox/PC crossplay
    # BepInEx mods (clients must install matching mods)
    mods:
      - name: Seasonality
        author: RustyMods
        version: "3.7.6"

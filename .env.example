# Homelab Infrastructure Configuration
# Copy this file to .env and fill in your values
# The .env file is gitignored for security

# =============================================================================
# Docker Compose user mapping (for both Ansible and OpenTofu containers)
# These values are auto-populated by 'make init' (run from ansible/ directory)
# =============================================================================
UID=1000
GID=1000

# =============================================================================
# OpenBao Secrets Management
# Required for Ansible/OpenTofu to retrieve secrets from OpenBao
# =============================================================================

# OpenBao server address
BAO_ADDR=https://bao.lan.quietlife.net:8200

# OpenBao token (create with appropriate policy - see docs/openbao-secrets.md)
# This token should have read-only access to secrets needed by automation
BAO_TOKEN=

# Skip TLS certificate verification
# Only needed for:
#   - Initial bootstrap (before wildcard cert is deployed to OpenBao)
#   - Recovery when wildcard cert has expired
# Once wildcard cert is deployed, remove this or set to false
# See docs/openbao.md "TLS Certificate Management" for details
# BAO_SKIP_VERIFY=true

# =============================================================================
# OpenTofu State Storage (NFS mount from NAS)
# Path to the NFS-mounted tofu-state share on this workstation
# =============================================================================
TOFU_STATE_PATH=/mnt/nas/tofu-state

# =============================================================================
# Proxmox API Configuration (for OpenTofu VM provisioning)
# =============================================================================

# Proxmox API URL (use hostname for TLS verification with wildcard cert)
PM_API_URL=https://pve1.lan.quietlife.net:8006/api2/json

# Proxmox API Token ID (format: user@realm!tokenid)
# Example: root@pam!tofu-token
PM_API_TOKEN_ID=

# Proxmox API Token Secret
PM_API_TOKEN_SECRET=

# Proxmox node name (usually "pve", not the inventory hostname)
PM_NODE_NAME=pve

# Datastore for downloaded cloud images (defaults to 'local')
PM_IMAGE_DATASTORE_ID=local

# Datastore for VM disks (defaults to 'local-lvm')
PM_VM_DATASTORE_ID=local-lvm
